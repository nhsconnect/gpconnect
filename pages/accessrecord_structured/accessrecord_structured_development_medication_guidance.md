---
title: Medication guidance
keywords: getcarerecord
tags: [design,structured]
sidebar: accessrecord_structured_sidebar
permalink: accessrecord_structured_development_medication_guidance.html
summary: "Guidance on the representation of medication in GP Connect"
---
## Medication search criteria ###

There are 2 parameters that can be specified while retrieving medications. A search from date and a boolean that can be set to 'false' in order to exclude medication issues.

As a default, the medication issues are always included in the bundle that is returned. If the consumer specifically wants to retrieve the medication items without any of the issues, then this **MUST** be specified in the request - in this case only the authorisations will be returned. That is, the `MedicationStatement` and `MedicationRequest` with `intent` set to `plan` for each medication item.

Below is a further detail about how the search criteria should be applied:

* Search for all Medications and Medical Devices that were active on or after the specified date
  * The consumer system requests all items from a start date
  * The provider system returns all authorisations (MedicationStatement and MedicationRequest with intent set to ‘plan’) whose effective period end date is null or is on or after the start date
  * Where no date is supplied by the consumer, all medications and medical devices are returned
* Do not include all the prescriptions issued under the returned medication/medical device authorisations
  * The consumer system requests not to include prescription issues
  * For each of the returned medication/medical device item, the provider system only includes the authorisations

Technical details relating to the search criteria are available on the [Retrieve a patient's structured record page](accessrecord_structured_development_retrieve_patient_record.html).

## Degraded medications

Where degraded medication records arising from GP2GP record transfer or any other means are present in the patient record, then these **MUST** be coded using the appropriate degrade code (`196421000000109`, Transfer-degraded medication entry) with the original medication name conveyed by `CodeableConcept.text`.

## Medication and Medical Device interoperability

Consumers of medication/medical device resources generated by other systems **MUST** consider the clinical safety issues arising from processing medication/medical device information recorded in different care settings and contexts, and seek clinical safety guidance where appropriate.

Key concerns are the understandability of received medication/medical device information and appropriate actions to degrade and identify medication/medical device concepts which are not understood by the receiving system. Appropriate clinical workflows may also be required at the receiver - for example, deactivation of received medications/medical devices such that they **MUST** be explicitly re-authorised to make them issuable.

Currently dosage and quantity information are expressed in unstructured/textual form. A system intending to consume dosage and quantity information needs to be capable of handling unstructured quantities and dosages. We expect GP Systems to transition to structured dose syntax in the future as detailed in [ISN DAPB4013](https://digital.nhs.uk/data-and-information/information-standards/information-standards-and-data-collections-including-extractions/publications-and-notifications/standards-and-collections/dapb4013-medicine-and-allergy-intolerance-data-transfer) and to populate the structured message to comply with the guidance set out in [UK Core](https://simplifier.net/guide/ukcoreimplementationguideformedicines/ElementDosage?version=current#text) but as applied to the STU3 dosage element structure. The records for current medication are likely to be in transition for a period of time with some in a structured format and some not. Historic medications **MAY** remain as unstructured dosage.

**Note** that the implementation guidance has been written for FHIR R4 UKCore with all examples based on R4 UKCore.

There are minimal differences between the FHIR STU3 and R4 UKCore versions of the `Dosage` structure. The UKCore version is identical to the international FHIR R4 version. Differences between STU3 and R4 are [documented](https://hl7.org/fhir/R4/dosage.html#tabs-Dosage-diff) (see 'R3 Diff' for details). Additional guidance is provided here to support implementations within the UK.

The difference relates to the `dose[x]` and `rate[x]` elements from STU3 that have been parented by a new `doseAndRate` element in FHIR R4. An optional `doseAndRate.type` element has been added to distinguish between calculated and ordered (by a human) dosage rates. This is not supported within STU3 and **SHOULD** be ignored.

To convert from R4 into STU3, remove the parent `doseAndRate` element and `type` element as shown in the example below:

### FHIR R4 and R4 UKCore Example

```xml
<doseAndRate>
     <type>
          <coding>
               <system value="http://terminology.hl7.org/CodeSystem/dose-rate-type"/>
               <code value="ordered"/>
               <display value="Ordered"/>
          </coding>
     </type>
     <doseQuantity>
          <value value="1000"/>
          <unit value="mL"/>
          <system value="http://unitsofmeasure.org"/>
          <code value="mL"/>
     </doseQuantity>
     <rateRatio>
          <numerator>
               <value value="50"/>
               <unit value="mL"/>
               <system value="http://unitsofmeasure.org"/>
               <code value="mL"/>
          </numerator>
          <denominator>
               <value value="1"/>
               <unit value="h"/>
               <system value="http://unitsofmeasure.org"/>
               <code value="h"/>
          </denominator>
     </rateRatio>
</doseAndRate>
```

### FHIR STU3 Example

```xml
<doseQuantity>
     <value value="1000"/>
     <unit value="mL"/>
     <system value="http://unitsofmeasure.org"/>
     <code value="mL"/>
</doseQuantity>
<rateRatio>
     <numerator>
          <value value="50"/>
          <unit value="mL"/>
          <system value="http://unitsofmeasure.org"/>
          <code value="mL"/>
     </numerator>
     <denominator>
          <value value="1"/>
          <unit value="h"/>
          <system value="http://unitsofmeasure.org"/>
          <code value="h"/>
     </denominator>
</rateRatio>
```

## Mixtures

In some systems it is possible to prescribe custom formulations compounded from other medications (extemporaneous preparations). Mixtures **MUST** be expressed using the degrade code (`196421000000109`, Transfer-degraded medication entry) with the constituents of the mixture expressed via `CodeableConcept.text`.

## dm+d name versus displayed name

It is possible for historic/legacy medications/medical devices to be displayed with a name corresponding to the name in the original system’s drug dictionary rather than the dm+d name. This name **MUST** be preserved via `CodeableConcept.text` when representing the medication via resources. `CodeableConcept.text` is redundant when the displayed medication/medical device name on the original system and the dm+d name is identical, and, in these cases, `CodeableConcept.text` **MUST** be omitted.

## Medication reviews

Medication reviews are not in the scope of the medication clinical area. These are available in the 'Diary entry' clinical area if they have been coded with a due date.

## Future-dated prescriptions

Medication/Medical Device issues may be future-dated – for example, repeat dispensed medications or a deferred acute medication that may not be needed if the condition resolves.

## Amendments to the Medication/Medical Device in a plan

All the prescriptions issued under a single medication/medical device plan **MUST** have the same medication/medical device.

Where the medication/medical device (including a Proprietary/Generic switch) of a medication/medical device plan is amended the existing authorisation/plan **MUST** be stopped or discontinued and a new authorisation created.

## Amendments to the Dosage Instructions in a plan

All the prescriptions issues under a single medication/medical device plan **MUST** have the same dosage instruction.

Where the dosage instructions of a medication/medical device plan is amended the existing authorisation/plan **MUST** be stopped or discontinued and a new authorisation created.

When splitting the plan due to a change in dosage the original authorisation should retain the repeat information as it was at the instant before the dosage changed. The new authorisation should contain the number of authorised issues remaining from the original plan and the number of issues at the new dosage. The new plan should reference the origianl plan using the `priorPrescription` element.

For example,

Consider the case where Furosemide 20mg tablets had been authorised as a repeat with 6 authorised issues with a dosage of 'twice daily as advised', 1 issue was made at this dosage and then the dosage was changed to 'One to be taken each morning'. The `authoredOn` and `validityPeriod.start` dates should be retained from the original authorisation.

The original plan would contain,

|element|value|
| ------ | ------ |
|MedicationRequest.id | E9881EF6-EF3A-4556-9202-A437C5E31128-HD-1|
|MedicationRequest.extension(repeatinformation).extension(numberOfRepeatsAllowed) | 6 |
|MedicationRequest.extension(repeatinformation).extension(numberOfRepeatsIssued) | 1 |
|MedicationRequest.dosageIntruction.text | 'twice daily as advised' |
|authoredOn | 2020-12-21T10:59:37.493+00:00 |
|validityPeriod.start | 2020-12-21 |

and the new plan would contain,

|element|value|
| ------ | ------ |
|MedicationRequest.id | E9881EF6-EF3A-4556-9202-A437C5E31128 |
|MedicationRequest.extension(repeatinformation).extension(numberOfRepeatsAllowed) | 5 |
|MedicationRequest.extension(repeatinformation).extension(numberOfRepeatsIssued) | 0 |
|MedicationRequest.dosageIntruction.text | 'One to be taken each morning' |
|MedicationRequest.priorPrescription | E9881EF6-EF3A-4556-9202-A437C5E31128-HD-1 |
|authoredOn | 2020-12-21T10:59:37.493+00:00 |
|validityPeriod.start | 2020-12-21 |

The populated resources for this example are shown below,

{% include accessrecord_structured/split_plan.json %}

## Medication discontinuation/stopping

Where a medication/medical device is stopped or discontinued then the status of the authorisation **MUST** be changed to 'stopped' and a textual stop reason provided via `statusReason.reason`.

A `statusReason` **MUST NOT** be generated when an authorisation has simply expired (exceeded review date or number of issues).

## Authorisation

In conjunction with `MedicationStatement`, a `MedicationRequest` with an `intent` of `plan` represents an authorisation for acute, repeat, repeat dispensed medication/medical device.

## Re-authorisation

Where a medication/medical device is re-authorised a new authorisation **MUST** be generated in the form of a `MedicationStatement` and `MedicationRequest` with `intent` of `plan`. Subsequent issues of the medication/medical device **MUST** reference the new authorisation.
